{"version":3,"sources":["linkClass.js"],"names":[],"mappings":"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","file":"linkClass.js","sourcesContent":["import React from 'react';\nimport makeConfiguration from './makeConfiguration';\nimport isIterable from './isIterable';\nimport _ from 'lodash';\n\nlet generateAppendClassName,\n    linkClass,\n    parseStyleName;\n\nparseStyleName = (styleNamePropertyValue: string, allowMultiple: boolean): Array<string> => {\n    let styleNames;\n\n    styleNames = styleNamePropertyValue.split(' ');\n    styleNames = _.filter(styleNames);\n\n    if (allowMultiple === false && styleNames.length > 1) {\n        throw new Error('ReactElement styleName property defines multiple module names (\"' + styleNamePropertyValue + '\").');\n    }\n\n    return styleNames;\n};\n\ngenerateAppendClassName = (styles, styleNames: Array<string>, errorWhenNotFound: boolean): string => {\n    let appendClassName;\n\n    appendClassName = '';\n\n    appendClassName = _.map(styleNames, (styleName) => {\n        if (styles[styleName]) {\n            return styles[styleName];\n        } else {\n            if (errorWhenNotFound === true) {\n                throw new Error('\"' + styleName + '\" CSS module is undefined.');\n            }\n\n            return '';\n        }\n    });\n\n    appendClassName = _.filter(appendClassName, 'length');\n\n    appendClassName = appendClassName.join(' ');\n\n    return appendClassName;\n};\n\n/**\n * @param {ReactElement} element\n * @param {Object} styles CSS modules class map.\n * @param {CSSModules~Options} userConfiguration\n * @returns {ReactElement}\n */\nlinkClass = (element, styles = {}, userConfiguration) => {\n    let appendClassName,\n        children,\n        clonedElement,\n        configuration,\n        newChildren,\n        newProps,\n        styleNames;\n\n    // @see https://github.com/gajus/react-css-modules/pull/30\n    if (!_.isObject(element)) {\n        return element;\n    }\n\n    configuration = makeConfiguration(userConfiguration);\n\n    styleNames = parseStyleName(element.props.styleName || '', configuration.allowMultiple);\n\n    if (styleNames.length) {\n        appendClassName = generateAppendClassName(styles, styleNames, configuration.errorWhenNotFound);\n    }\n\n    // element.props.children can be one of the following:\n    // 'text'\n    // ['text']\n    // [ReactElement, 'text']\n    // ReactElement\n\n    children = element.props.children;\n\n    if (React.isValidElement(children)) {\n        newChildren = linkClass(React.Children.only(children), styles, configuration);\n    } else if (_.isArray(children) || isIterable(children)) {\n        /* eslint-disable lodash3/prefer-lodash-method */\n        newChildren = React.Children.map(children, (node) => {\n        /* eslint-enable lodash3/prefer-lodash-method */\n            if (React.isValidElement(node)) {\n                return linkClass(node, styles, configuration);\n            } else {\n                return node;\n            }\n        });\n\n        // https://github.com/facebook/react/issues/4723#issuecomment-135555277\n        // Forcing children into an array produces the following error:\n        // Warning: A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers.\n        // newChildren = _.values(newChildren);\n    }\n\n    if (appendClassName) {\n        if (element.props.className) {\n            appendClassName = element.props.className + ' ' + appendClassName;\n        }\n\n        newProps = {\n            className: appendClassName,\n            styleName: null\n        };\n    }\n\n    if (newChildren) {\n        clonedElement = React.cloneElement(element, newProps, newChildren);\n    } else {\n        clonedElement = React.cloneElement(element, newProps);\n    }\n\n    return clonedElement;\n};\n\nexport default linkClass;\n"],"sourceRoot":"/source/"}